<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Test Actiw-web - Projects latest releases</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
</head>

<body>
    <h1>Projects latest releases</h1>
    <p>
        Releases number: <b>{{ _releases.len() }}</b>
    </p>
    <div>
        <pre>{{ _releases|json }}</pre>
    </div>
    <ul>
        {% for release in _releases %}
            <li>
                {% match release.project %}
                    {% when Some with (p) %}
                        {{ p.name }}
                    {% when None %}
                {% endmatch %}:
                {{ release.tag_name }}
            </li>
        {% endfor %}
    </ul>

    <div id="dump"></div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
    <script>
       function getHeaders() {
var req = new XMLHttpRequest();
req.open('GET', document.location, false);
req.send(null);

// associate array to store all values
var data = new Object();

// get all headers in one call and parse each item
var headers = req.getAllResponseHeaders().toLowerCase();
var aHeaders = headers.split('\n');
var i =0;
for (i= 0; i < aHeaders.length; i++) {
    var thisItem = aHeaders[i];
    var key = thisItem.substring(0, thisItem.indexOf(':'));
    var value = thisItem.substring(thisItem.indexOf(':')+1);
    data[key] = value;
}	    

// get referer
var referer = document.referrer;
data["Referer"] = referer;

//get useragent
var useragent = navigator.userAgent;
data["UserAgent"] = useragent;


//extra code to display the values in html
var display = "";
for(var key in data) {
    if (key != "")
	display += "<b>" + key + "</b> : " + data[key] + "<br>";
}
document.getElementById("dump").innerHTML =  display;  
   }	
getHeaders();
    </script>  
</body>
</html>